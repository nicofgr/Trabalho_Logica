:- dynamic duda_possui/1.
:- dynamic local_duda/1.
:- dynamic dialogue_screen/1.

local_duda(patio).

dialogue_screen(sim).

acessivel(patio, casa):- duda_possui(banho).
acessivel(patio, Y):- Y \== casa, Y\== escritorio.
acessivel(X, patio):- X \== escritorio.
acessivel(casa, escritorio).
acessivel(escritorio, casa).

ir_para(X):- X\== patio, X\== casa, X\== lagoa, X\== galinheiro, X\== floresta, X\== escritorio, write("Esse local não existe, tente outro.").
ir_para(X):- local_duda(Y), X == Y, write("Duda já está em "), write(X).
ir_para(casa):- not(duda_possui(banho)), write("Estou imunda de barro, não posso entrar na casa! Deve ter algum lugar onde possa me limpar").
ir_para(X):- local_duda(Y), not(acessivel(Y, X)), write("Não consigo ir de "), write(Y), write(" para "), write(X).
ir_para(X):- local_duda(Y), retract(local_duda(Y)), assert(local_duda(X)), write("Duda foi para "), write(X).


pegar(X):- duda_possui(Y), X == Y, write("Eu já tenho "), write(X).

pegar(banho):- local_duda(lagoa), assert(duda_possui(banho)), write("Duda tomou banho!").
pegar(banho):- write("Não posso tomar banho aqui.").

pegar(rede):- local_duda(casa), assert(duda_possui(rede)), write("Duda pegou a rede.").
pegar(rede):- write("A rede está na [casa].").

pegar(bessy):- duda_possui(rede), local_duda(floresta), assert(duda_possui(bessy)), write("Duda pegou Bessy!").
pegar(bessy):- not(local_duda(floresta)), write("Bessy está na [floresta].").
pegar(bessy):- not(duda_possui(rede)), write("Preciso de uma rede para pegar Bessy, talvez tenha uma na [casa]!").

pegar(_X):- write("Esse item não existe!").


finalizado:- duda_possui(bessy), local_duda(galinheiro).

rodar:- dialogue_screen(sim), dialogue_screen(menu_principal), retract(dialogue_screen(sim)), rodar.
rodar:- finalizado, nl, write("Você salvou Bessy!!!!!!!!!"), nl, write("Jogo finalizado").
rodar:- nl, write("Digite o que deseja fazer:"), nl, write(">> "), read(X), call(X), rodar.

dialogue_screen(menu_principal):- write("FUGA DA GALINHA"), nl,
               write("A Dona Lurdes te chamou para capturar Bessy, a galinha premiada que fugiu para a floresta!"), nl,
               write("Você consegue leva-la de volta para o galinheiro???"), nl,
               nl, write("-----COMANDOS-----"), nl,
               write("ir_para() - Vai pro lugar indicado entre os parenteses"), nl,
               write("pegar() - Pega o item indicado entre os parenteses"), nl,
               nl, write("-----LOCAIS-----"), nl,
               write("patio "), nl, write("floresta "), nl, write("lagoa "), nl, write("casa "), nl, write("galinheiro "), nl.


